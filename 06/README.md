# Комментарии к 06:Guestbook2

## Информация о пользователях

admin => 1 (access_level = 1)

root  => toor (access_level = 1)

misha => smd (access_level = 2)

user  => user (access_level = 2)

## Логика ACCESS_LEVEL

1 - admin (главный администратор)

Видит IP-адресса, может удалять любые сообщения

2 - authorized_user (авторизованный пользователь)

Не видит IP-адресса, может удалять/изменять сообщения, отправленные им

3 - guest (гость)

Не видит IP-адресса, не может удалять никакие сообщения

## Хранение сообщений в $messagesArr

$messagesArr имеет следующую структуру и хранит в себе все сообщения:

```
[
    [message_id] => [
        'username'     => Имя пользователя,
        'datetime'     => Дата и время отправки сообщения,
        'message_text' => Текст отправленного сообщения,
        'user_ip'      => IP-адресс клиента
        Optional:
        'edited_datetime' => Дата и время изменения сообшения,
        'edited_username' => Имя пользователя, изменившего сообщение
    ]

    [message_id] => [
        ...
    ]

    .....
]
```

Массив $messagesArr хранится в упакованном виде в файле ```guestbook.txt```

## Константы

```MESSAGES_ON_PAGE```    => Количество сообщений на странице

```PAGES_AROUND```        => Количество сообщений, отображающихся рядом с текущей в панели навигации

```USERS_FILE_NAME```     => Имя файла, где хранится информация и пользователях

```GUESTBOOK_FILE_NAME``` => Имя файла, где хранится информация о всех сообщениях гостевой книги

## Комментарий об удалении и редактировании сообщений

Логично заявить, если критерием для удаления и редактирования сообщений будет являться совпадение IP-адресса
с которого было отправлено сообщение с IP-адрессом клиента, который хочет его удалить.

Однако, поскольку гостевая книга была реализована в рамках учебного проекта и все время запускается на локальном сервере
в качестве критерия было выбрано совпадение username'ов: того, кто отправил сообщение и того, кто хочет удалить/изменить его.

Вследствие чего образовывается **баг**:
Если некий гость будет оставлять сообщения в книге под ником qwerty, то любой другой
пользователь, зарегистрировавшись под ником qwerty, сможет удалить/изменить сообщения гостя.
